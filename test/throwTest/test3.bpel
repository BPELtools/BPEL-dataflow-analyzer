<!-- test3 BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Tue Feb 09 12:05:31 CET 2010 -->
<bpel:process name="test3"
         targetNamespace="http://gyy.com/test3NS"
         suppressJoinFailure="yes"
         xmlns:tns="http://gyy.com/test3NS"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         >
         
    <!-- ================================================================= -->         
    <!-- PARTNERLINKS                                                      -->
    <!-- List of services participating in this BPEL process               -->
    <!-- ================================================================= -->         
    <bpel:partnerLinks>       
    </bpel:partnerLinks>
  
    <!-- ================================================================= -->         
    <!-- VARIABLES                                                         -->
    <!-- List of messages and XML documents used within this BPEL process  -->
    <!-- ================================================================= -->         
    <bpel:variables>
    </bpel:variables>

    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->             
    <bpel:flow name="Flow"><bpel:scope name="Scope1">
            <bpel:faultHandlers><bpel:catchAll>
                    <bpel:compensateScope name="CompensateScope"></bpel:compensateScope>
                </bpel:catchAll></bpel:faultHandlers>
            <bpel:scope name="Scope2">
                <bpel:faultHandlers><bpel:catch>
                        <bpel:throw faultName="throw1" faultVariable="output"></bpel:throw>
                    </bpel:catch></bpel:faultHandlers>
                <bpel:compensationHandler>
                    <bpel:sequence><bpel:compensate></bpel:compensate><bpel:rethrow></bpel:rethrow></bpel:sequence>
                    <bpel:throw faultName="throw2" faultVariable="output"></bpel:throw>
                </bpel:compensationHandler>
                <bpel:scope name="Scope3">
                    <bpel:sequence>
                        <bpel:if name="If">
                            <bpel:throw name="Throw1"></bpel:throw>
                        </bpel:if>
                        <bpel:assign validate="no" name="B"><bpel:copy>
					<bpel:from>
						<bpel:literal>discount</bpel:literal>
					</bpel:from>
					<bpel:to variable="output" />
				</bpel:copy>
                    
                        </bpel:assign>
                    </bpel:sequence>
                    <bpel:eventHandlers>
                        <bpel:onEvent partnerLink="x" operation="y"><bpel:scope name="scopeInEH">
                                <bpel:throw name="Throw"></bpel:throw>
                            </bpel:scope></bpel:onEvent>
                    </bpel:eventHandlers>
                </bpel:scope>
            </bpel:scope>
            <bpel:targets>
                <bpel:target linkName="link1"></bpel:target>
            </bpel:targets>
            <bpel:sources>
                <bpel:source linkName="link2"></bpel:source>
            </bpel:sources>
        </bpel:scope>
        <bpel:assign validate="no" name="A">
            <bpel:sources>
                <bpel:source linkName="link1"></bpel:source>
            </bpel:sources>
            <bpel:copy>
					<bpel:from>
						<bpel:literal>discount</bpel:literal>
					</bpel:from>
					<bpel:to variable="output" />
				</bpel:copy>
        </bpel:assign>
        <bpel:assign validate="no" name="C">
            <bpel:targets>
                <bpel:target linkName="link2"></bpel:target>
            </bpel:targets>
            <bpel:copy>
					<bpel:from>
						<bpel:literal>discount</bpel:literal>
					</bpel:from>
					<bpel:to variable="output" />
				</bpel:copy>
        </bpel:assign><bpel:links>
            <bpel:link name="link1"></bpel:link>
            <bpel:link name="link2"></bpel:link>
        </bpel:links></bpel:flow>
</bpel:process>

